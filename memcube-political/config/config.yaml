# MemCube 政治理论概念图扩增配置

# API配置
api:
  base_url: "https://api.openai.com/v1"
  model_thinker: "gpt-4"  # 用于思考分析的强模型
  model_extractor: "gpt-4o-mini"  # 用于概念提取的模型
  model_expander: "gpt-4o-mini"  # 用于概念扩增的模型
  model_qa_generator: "gpt-4"  # 用于QA生成的强模型
  max_retries: 3
  timeout: 60

# 概念图扩增参数
concept_expansion:
  similarity_threshold: 0.80  # 概念相似度阈值
  new_concept_rate_threshold: 0.10  # 新概念增长率阈值
  new_edge_rate_threshold: 0.05  # 新边增长率阈值
  max_iterations: 10  # 最大迭代次数
  batch_size: 50  # 批处理大小
  max_workers: 10  # 并发工作数

# QA生成参数
qa_generation:
  concepts_per_batch: 20  # 每批处理的概念数
  qa_pairs_per_concept: 3  # 每个概念生成的QA对数
  qa_pairs_per_concept_pair: 2  # 每个概念对生成的QA对数
  max_workers: 5  # QA生成并发数

# Embedding配置
embedding:
  model_name: "bge-m3"  # 本地ollama模型
  model_type: "ollama"  # 使用ollama
  ollama_url: "http://localhost:11434"  # ollama服务地址
  batch_size: 16
  device: "cpu"  # ollama在本地运行

# 数据路径
paths:
  seed_concepts: "../memos/political_seed_concepts.txt"
  qa_data: "../memos/transformed_political_data.json"
  concept_graph_dir: "data/concept_graph"
  results_dir: "results"
  logs_dir: "logs"

# 日志配置
logging:
  level: "INFO"
  format: "{time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} - {message}"
  rotation: "1 day"
  retention: "30 days"

# 收敛控制
convergence:
  check_frequency: 1  # 每1轮检查一次收敛
  early_stop_patience: 3  # 连续3轮无改善则停止
  min_concepts: 100  # 最小概念数
  max_concepts: 50000  # 最大概念数

# 输出配置
output:
  save_intermediate: true  # 保存中间结果
  compress_large_files: true  # 压缩大文件
  include_metadata: true  # 包含元数据